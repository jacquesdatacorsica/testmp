<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Pierre-Henri Morand" />


<title>Live from Tender Electronic Daily Database</title>

<script src="site_libs/header-attrs-2.6/header-attrs.js"></script>
<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="site_libs/datatables-binding-0.17/datatables.js"></script>
<link href="site_libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="site_libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="site_libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<script src="site_libs/jszip-1.10.20/jszip.min.js"></script>
<script src="site_libs/pdfmake-1.10.20/pdfmake.js"></script>
<script src="site_libs/pdfmake-1.10.20/vfs_fonts.js"></script>
<link href="site_libs/dt-ext-buttons-1.10.20/css/buttons.dataTables.min.css" rel="stylesheet" />
<script src="site_libs/dt-ext-buttons-1.10.20/js/dataTables.buttons.min.js"></script>
<script src="site_libs/dt-ext-buttons-1.10.20/js/buttons.flash.min.js"></script>
<script src="site_libs/dt-ext-buttons-1.10.20/js/buttons.html5.min.js"></script>
<script src="site_libs/dt-ext-buttons-1.10.20/js/buttons.colVis.min.js"></script>
<script src="site_libs/dt-ext-buttons-1.10.20/js/buttons.print.min.js"></script>
<link href="site_libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>





<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">DeCoMaP</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="Journal.html">Journal</a>
</li>
<li>
  <a href="live_from_DECP.html">live from D.E.C.P.</a>
</li>
<li>
  <a href="live_from_TED.html">Live from T.E.D.</a>
</li>
<li>
  <a href="live_from_BOAMP.html">Live from B.O.A.M.P.</a>
</li>
<li>
  <a href="Links.html">Links</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Live from Tender Electronic Daily Database</h1>
<h4 class="author">Pierre-Henri Morand</h4>
<h4 class="date">date: 2021-04-30</h4>

</div>


<div id="presentation-of-the-database" class="section level1">
<h1>Presentation of the database</h1>
<div id="main-characteristics" class="section level2">
<h2>Main characteristics</h2>
<ul>
<li><p>The data comes from public procurement standard forms, which are filled in by contracting bodies and sent as notices for publication to TED. Most of the variables in the data directly correspond to the fields in the forms.</p></li>
<li><p>TED - Contract award notices 2010-2019. It is a merged file for the analysis across the years.</p></li>
<li><p>TED data has multiple levels. Contract awards (CAs), which is the fifth section of a CAN standard form. Each CAN has one or more CAs. ID_award_ca is an ID of a CA.</p></li>
<li><p>These levels serve different purposes. To give an example, a CAN generally informs on the result of the procurement (“The ministry has bought furniture”); and the three individual CAs, nested within the CAN, inform about the specific detail (“The ministry has bought a chair from company A”; “The ministry has bought a table from company B”; “The ministry has bought a cupboard from company B”).</p></li>
</ul>
</div>
<div id="downloading-the-data" class="section level2">
<h2>Downloading the data</h2>
<p>The latest database can be downloaded directly <a href="https://data.europa.eu/euodp/repository/ec/dg-grow/mapps/TED%202020/Export_OpenDataCAN_from2010to2019.csv">here</a></p>
<pre class="r"><code>#importing useful library

library(tidyverse)
library(banR)
library(jsonlite)
library(magrittr)
library(data.tree)
library(geosphere)
library(sf)
library(cartography)
library(stringr)

#creating the data repository
data_dir &lt;- &#39;data&#39;
if (!dir.exists(data_dir)) {
  dir.create(data_dir)
}

# downloading the DECP JSON file from the remote data.europa.eu site.
TED_url &lt;- &quot;https://data.europa.eu/euodp/repository/ec/dg-grow/mapps/TED%202020/Export_OpenDataCAN_from2010to2019.csv&quot;
TED_destfile &lt;-  str_c(data_dir, &quot;/Export_OpenDataCAN_from2010to2019.csv&quot;)
if (!file.exists(TED_destfile)) {
  download.file(TED_url, TED_destfile)
}

# creating the dataframe
TED&lt;- read.csv(TED_destfile)</code></pre>
</div>
</div>
<div id="some-data-to-work-up-the-appetite" class="section level1">
<h1>Some data to work up the appetite!</h1>
<p>The database represents 6260370 contracts awarded between 2010 and 2019. Here is the number of contracts by buyers country and by year :</p>
<pre class="r"><code>library(DT)
library(tidyverse)

#datatable(table(TED$ISO_COUNTRY_CODE, TED$YEAR), colnames = c(&quot;Country code&quot;, &quot;Year&quot;, &quot;Nb of Contracts&quot;))
table_1&lt;-as.data.frame(table(TED$ISO_COUNTRY_CODE, TED$YEAR))
table_1 %&gt;%
  datatable(extensions = &#39;Buttons&#39;,
            options = list(dom = &#39;Blfrtip&#39;,
                           buttons = c(&#39;copy&#39;, &#39;csv&#39;, &#39;excel&#39;, &#39;pdf&#39;, &#39;print&#39;),
                           lengthMenu = list(c(10,25,50,-1),
                                             c(10,25,50,&quot;All&quot;))), colnames = c(&quot;Country code&quot;, &quot;Year&quot;, &quot;Nb of Contracts&quot;))</code></pre>
<div id="htmlwidget-e6929f77021da6cb8015" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-e6929f77021da6cb8015">{"x":{"filter":"none","extensions":["Buttons"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330"],["AT","BE","BG","CH","CY","CZ","DE","DK","EE","ES","FI","FR","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MK","MT","NL","NO","PL","PT","RO","SE","SI","SK","UK","AT","BE","BG","CH","CY","CZ","DE","DK","EE","ES","FI","FR","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MK","MT","NL","NO","PL","PT","RO","SE","SI","SK","UK","AT","BE","BG","CH","CY","CZ","DE","DK","EE","ES","FI","FR","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MK","MT","NL","NO","PL","PT","RO","SE","SI","SK","UK","AT","BE","BG","CH","CY","CZ","DE","DK","EE","ES","FI","FR","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MK","MT","NL","NO","PL","PT","RO","SE","SI","SK","UK","AT","BE","BG","CH","CY","CZ","DE","DK","EE","ES","FI","FR","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MK","MT","NL","NO","PL","PT","RO","SE","SI","SK","UK","AT","BE","BG","CH","CY","CZ","DE","DK","EE","ES","FI","FR","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MK","MT","NL","NO","PL","PT","RO","SE","SI","SK","UK","AT","BE","BG","CH","CY","CZ","DE","DK","EE","ES","FI","FR","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MK","MT","NL","NO","PL","PT","RO","SE","SI","SK","UK","AT","BE","BG","CH","CY","CZ","DE","DK","EE","ES","FI","FR","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MK","MT","NL","NO","PL","PT","RO","SE","SI","SK","UK","AT","BE","BG","CH","CY","CZ","DE","DK","EE","ES","FI","FR","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MK","MT","NL","NO","PL","PT","RO","SE","SI","SK","UK","AT","BE","BG","CH","CY","CZ","DE","DK","EE","ES","FI","FR","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MK","MT","NL","NO","PL","PT","RO","SE","SI","SK","UK"],["2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2010","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2011","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2012","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2013","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2014","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019"],[3387,6419,6692,1387,1132,6693,32552,4860,1586,26900,6943,132698,2943,2,6340,2888,143,18543,62,7022,630,10957,76,307,6659,3125,97039,2105,14587,7594,6431,1926,33235,3344,6918,7231,1258,1051,6098,31302,5341,1628,22295,7073,136635,3438,1,6445,4529,362,19996,54,9819,1221,14055,115,190,8037,2989,115209,2360,22191,7901,6779,2154,36560,3764,7767,10774,1462,922,8496,34546,5786,2214,18335,6625,131189,4010,0,5218,3718,259,21937,12,14488,757,11643,140,202,6452,3389,122407,1797,24806,9355,8270,4415,38810,3627,7633,11245,1884,1037,9431,37351,6902,2054,19077,6917,129121,4059,440,7553,2369,144,19903,3,7541,1005,13908,120,188,6537,3733,130273,2630,21105,10147,7279,9214,35054,3341,8074,12354,2178,1021,11826,39334,6089,2809,21946,7501,122197,6754,5115,6144,2667,216,20653,2,16407,787,14612,443,395,7815,3434,132633,3183,27158,10532,5953,3404,34557,3561,7440,11433,4339,607,14158,42744,5992,3240,21795,7136,120761,5406,9043,6364,2524,88,21138,2,8108,1332,15995,1804,489,8776,4151,129319,4125,33575,12387,7616,3644,46071,4357,8891,13638,4435,873,12702,50270,7480,2991,25385,7443,112781,5782,6451,6724,3557,129,21636,15,9349,1647,14727,2127,425,10473,5003,113235,3881,29368,15083,9069,3164,51906,4345,8375,28368,3677,601,21911,60380,9064,4063,32803,7513,129751,4308,9342,9271,3542,129,19746,57,12618,970,13275,2285,984,8732,4514,153874,5655,47532,14408,43902,4710,39285,4904,10719,34698,3671,727,31012,69205,8927,5813,43939,7489,124925,7996,10145,12278,4337,285,24467,32,27684,1087,10695,2509,1353,9775,5086,164583,8591,64374,18056,48020,6176,41454,5568,12395,32160,4354,1015,34575,82266,11943,8917,57384,10440,132944,11068,14953,10716,3702,431,32356,41,33519,1669,12655,4193,1267,9658,5487,169016,10519,241599,20117,55494,4794,44568]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Country code<\/th>\n      <th>Year<\/th>\n      <th>Nb of Contracts<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Blfrtip","buttons":["copy","csv","excel","pdf","print"],"lengthMenu":[[10,25,50,-1],["10","25","50","All"]],"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>France (as well as Poland) accounts for a large share of the data available under TED.</p>
<pre class="r"><code>table_2&lt;-table(TED[which(TED$ISO_COUNTRY_CODE==&quot;FR&quot; |TED$ISO_COUNTRY_CODE==&quot;DE&quot;|TED$ISO_COUNTRY_CODE==&quot;IT&quot;|TED$ISO_COUNTRY_CODE==&quot;UK&quot;|TED$ISO_COUNTRY_CODE==&quot;PL&quot;),]$YEAR, TED[which(TED$ISO_COUNTRY_CODE==&quot;FR&quot; |TED$ISO_COUNTRY_CODE==&quot;DE&quot;|TED$ISO_COUNTRY_CODE==&quot;IT&quot;|TED$ISO_COUNTRY_CODE==&quot;UK&quot;|TED$ISO_COUNTRY_CODE==&quot;PL&quot;),]$ISO_COUNTRY_CODE)
barplot(table_2, legend.text = TRUE, main=&quot;cumulative nb of contracts&quot;, ylab=&quot;Nb&quot;, xlab=&quot;Country&quot;)</code></pre>
<p><img src="live_from_TED_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>The distribution of contracts by main categories gives us, for the entire database:</p>
<pre class="r"><code>library(RColorBrewer)
count&lt;-table(TED$TYPE_OF_CONTRACT)
color &lt;- brewer.pal(length(count), &quot;Set2&quot;)
pie(table(TED$TYPE_OF_CONTRACT), labels = table(TED$TYPE_OF_CONTRACT), col = color, density = 50, angle = 45)</code></pre>
<p><img src="live_from_TED_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<pre class="r"><code>pie_labels &lt;- paste0(c(&quot;Works: &quot;, &quot;Furnitures: &quot;, &quot;Services: &quot;),round(100 * count/sum(count), 2), &quot;%&quot;)
pie(count, labels = pie_labels,col = color, density = 50, angle = 45)</code></pre>
<p><img src="live_from_TED_files/figure-html/unnamed-chunk-3-2.png" width="672" /></p>
<p>Similarly, the type of purchasers corresponds to:`</p>
<pre class="r"><code>library(DT)
library(tidyverse)

#datatable(table(TED$ISO_COUNTRY_CODE, TED$YEAR), colnames = c(&quot;Country code&quot;, &quot;Year&quot;, &quot;Nb of Contracts&quot;))
table_2&lt;-as.data.frame(table(TED$CAE_TYPE))
table_2 %&gt;%
  datatable(extensions = &#39;Buttons&#39;,
            options = list(dom = &#39;Blfrtip&#39;,
                           buttons = c(&#39;copy&#39;, &#39;csv&#39;, &#39;excel&#39;, &#39;pdf&#39;, &#39;print&#39;),
                           lengthMenu = list(c(10,25,50,-1),
                                             c(10,25,50,&quot;All&quot;))), colnames = c(&quot;CAE type&quot;,  &quot;Nb of Contracts&quot;))</code></pre>
<div id="htmlwidget-a1ba06e0392a06efb7b1" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-a1ba06e0392a06efb7b1">{"x":{"filter":"none","extensions":["Buttons"],"data":[["1","2","3","4","5","6","7","8","9","10"],["1","3","4","5","5A","6","8","N","R","Z"],[594227,1378134,408440,24264,2531,1958951,1425286,113078,135447,220012]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>CAE type<\/th>\n      <th>Nb of Contracts<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Blfrtip","buttons":["copy","csv","excel","pdf","print"],"lengthMenu":[[10,25,50,-1],["10","25","50","All"]],"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>with:</p>
<table>
<colgroup>
<col width="47%" />
<col width="52%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">CAE Code</th>
<th align="left">CAE Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="left">Ministry or any other national or federal authority, including their regional of local subdivisions</td>
</tr>
<tr class="even">
<td align="center">3</td>
<td align="left">Regional or local authority</td>
</tr>
<tr class="odd">
<td align="center">4</td>
<td align="left">Water, energy, transport and telecommunications sectors</td>
</tr>
<tr class="even">
<td align="center">5</td>
<td align="left">European Union institution/agency</td>
</tr>
<tr class="odd">
<td align="center">5A</td>
<td align="left">other international organisation</td>
</tr>
<tr class="even">
<td align="center">6</td>
<td align="left">Body governed by public law</td>
</tr>
<tr class="odd">
<td align="center">8</td>
<td align="left">Other</td>
</tr>
<tr class="even">
<td align="center">N</td>
<td align="left">National or federal Agency / Office</td>
</tr>
<tr class="odd">
<td align="center">R</td>
<td align="left">Regional or local Agency / Office</td>
</tr>
<tr class="even">
<td align="center">Z</td>
<td align="left">Not specified</td>
</tr>
</tbody>
</table>
</div>
<div id="let-us-focus-on-french-contracts" class="section level1">
<h1>Let us focus on French contracts!</h1>
<pre class="r"><code>TEDFR &lt;- TED[which(TED$ISO_COUNTRY_CODE==&quot;FR&quot;),]
rm(TED)
rm(table_1)
rm(table_2)</code></pre>
<p>We’ve got 1273002 contracts in the French Database.</p>
<pre class="r"><code>table(TEDFR$YEAR)-&gt;table_1
barplot(table_1, legend.text = &quot;Nb of contracts by year&quot;)</code></pre>
<p><img src="live_from_TED_files/figure-html/unnamed-chunk-5-1.png" width="672" /> # Manipulation of the database</p>
<p>In order to focus on effective awarded contracts, we don’t consider raws of the database without any name for the selected supplier. Similarly, sometimes, the award notice reflects an unsuccessful call for tenders. In order to suppress the corresponding lines, it should be noticed that in the database, the <em>WIN_NAME</em> presents terms like “infructueux” or “sans suite”. We now reduce our attention to the successful call for tenders</p>
<pre class="r"><code>TEDFR&lt;-TEDFR[which(TEDFR$WIN_NAME!=&quot;&quot;),]
TEDFR&lt;-TEDFR[which(str_detect(TEDFR$WIN_NAME, &quot;infructueux&quot;)==FALSE),]
TEDFR&lt;-TEDFR[which(str_detect(TEDFR$WIN_NAME, &quot;sans suite&quot;)==FALSE),]</code></pre>
<p>We’ve got now only 1156017 contracts in the French Database.</p>
<div id="environmental-clauses" class="section level2">
<h2>environmental clauses</h2>
<p>In order to infer the existence of environmental clauses as specific evaluation criteria, we create a specific variable that take value 1 if environmental concerns appear in the award notice, 0 otherwise. The notice is written in French, such that we consider a environmental concern if we can detect string like “développement durable”, “environnement” (for environnement, environementAL a.s.o), “écologi” (for écologiQUE, écologiE) and “RSE” (Social and Environmental Responsability).</p>
<p>We observe 10.55 % of contracts with environmental clauses.</p>
<p>In order to check that this method makes it possible, over the period, to identify in a relevant way the real presence of environmental clauses in public procurement contracts, one can observe the evolution of frequency over time.</p>
<pre class="r"><code>mean_envir&lt;-c()
for(i in 1:10){mean_envir[i]&lt;- mean(TEDFR[which(TEDFR$YEAR==i+2009),]$ENVIR,na.rm=TRUE)}
years&lt;-c()
for(i in 1:10){years[i]&lt;-i+2009}</code></pre>
<pre class="r"><code>plot(years[1:10],mean_envir[1:10],type = &quot;b&quot;, main = &quot;% of envir. clauses&quot;, xlab = &quot;years&quot;,ylab=&quot;&quot;)</code></pre>
<p><img src="live_from_TED_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="local-buying" class="section level2">
<h2>local buying</h2>
<p>We create a first, very rough indicator of spatial proximity between buyer and supplier. In France, the first two digits of the postal code refer to the department. <code>LOCAL</code> takes value 1 if the public purchaser selects a supplier in this own department, 0 otherwise.</p>
<pre class="r"><code>TEDFR$LOCAL&lt;-ifelse(str_sub(TEDFR$CAE_POSTAL_CODE, 1, 2)==str_sub(TEDFR$WIN_POSTAL_CODE, 1, 2),1,0)</code></pre>
<p>34.87 % of public purchasing is made inside the same department.</p>
<pre class="r"><code>table(TEDFR$LOCAL, TEDFR$CAE_TYPE)</code></pre>
<pre><code>##    
##          1      3      4      5     5A      6      8      N      R      Z
##   0  49287 189665  33650    285    383 142600 203333   6316   8861 118573
##   1  16019 162150   9896    132     98  63567  80548   2233   6902  61519</code></pre>
<pre class="r"><code>TC &lt;- table(TEDFR$LOCAL, TEDFR$CAE_TYPE)</code></pre>
<pre class="r"><code>summary(TC) </code></pre>
<pre><code>## Number of cases in table: 1156017 
## Number of factors: 2 
## Test for independence of all factors:
##  Chisq = 33085, df = 9, p-value = 0</code></pre>
<pre class="r"><code>round(TC[2]/colSums(TC),2)</code></pre>
<pre><code>##     1     3     4     5    5A     6     8     N     R     Z 
##  0.25  0.05  0.37 38.41 33.30  0.08  0.06  1.87  1.02  0.09</code></pre>
<p>Of course, it varies also a lot depending on the type of the contract :</p>
<pre class="r"><code>summary(TC2)</code></pre>
<pre><code>## Number of cases in table: 1156017 
## Number of factors: 2 
## Test for independence of all factors:
##  Chisq = 94973, df = 2, p-value = 0</code></pre>
<pre class="r"><code>round(TC2[2]/colSums(TC2),2)</code></pre>
<pre><code>##    S    U    W 
## 0.39 0.37 0.73</code></pre>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
